<div class="container">
	<div class="row mt-2 top-games">
		<ng-template #loading>
			<app-loading></app-loading>
		</ng-template>
		<ng-container
			*ngIf="
				(gamesRecived$ | async) && !(gamesRequested$ | async);
				else loading
			"
		>
			<mat-card class="mb-5 col-12">
				<mat-card-header class="title">
					<mat-card-title>
						<h4>Add Game to my collection</h4>
					</mat-card-title>
				</mat-card-header>
				<mat-card-content>
					<form
						#searchForm="ngForm"
						(ngSubmit)="onSearch(searchForm)"
					>
						<mat-form-field class="col-8">
							<mat-label>Type title you want to add</mat-label>
							<input
								matInput
								type="text"
								minlength="3"
								ngModel
								name="searchText"
							/>
						</mat-form-field>
						<div class="col-4 d-inline-flex align-items-center">
							<button
								mat-raised-button
								color="primary"
								type="submit"
							>
								<mat-icon>search</mat-icon>
								Find
							</button>
							<button
								type="reset"
								class="ml-2"
								mat-raised-button
								color="accent"
								(click)="resetSearch()"
							>
								Reset
							</button>
						</div>
					</form>
					<div
						class="container"
						*ngIf="gameSearches$ | async as gamesSearchResults"
					>
						<div class="row">
							<div
								class="col-12"
								*ngFor="let game of gamesSearchResults"
							>
								<app-search-result
									(selectedGame)="addGame($event)"
									[game]="game"
								></app-search-result>
							</div>
						</div>
					</div>
				</mat-card-content>
			</mat-card>

			<mat-card class="col-12">
				<mat-card-content>
					<app-user-top-list></app-user-top-list>
				</mat-card-content>
			</mat-card>
		</ng-container>
	</div>
</div>
